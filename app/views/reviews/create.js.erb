console.log("<%= params[:review][:origin_controller] %>")

<% if params[:review][:origin_controller] == "cars" %>

  function refreshForm(innerHTML) {
    const newReviewForm = document.getElementById('review-card');
    newReviewForm.innerHTML = innerHTML;
  }

  function addReview(reviewHTML) {
    const reviews = document.getElementById('reviews');
    reviews.insertAdjacentHTML('afterbegin', reviewHTML);
  }

  <% if @review.errors.any? %>

    refreshForm('<%= j render "cars/review_card", review: @review, unreviewed_bookings: @unreviewed_bookings, current_controller_name: "cars" %>');
  <% else %>
    addReview('<%= j render "reviews/show", review: @review %>');

    refreshForm('<%= j render "cars/review_card", review: Review.new, unreviewed_bookings: @unreviewed_bookings, current_controller_name: "cars" %>');
  <% end %>

<% elsif params[:review][:origin_controller] == "bookings" %>

  function refreshForm(innerHTML) {
    const newReviewForm = document.getElementById('review-card-booking');
    newReviewForm.innerHTML = innerHTML;
  }


  refreshForm('<%= j render "bookings/review_card_booking", review: @review, booking: @booking, current_controller_name: "bookings" %>');


<% end %>
